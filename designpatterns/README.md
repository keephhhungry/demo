# 设计模式

#### 六大原则
1.单一职责原则 S

一个类只负责完成一个职责或者功能。不要设计大而全的类，要设计粒度小、功能单一的类。
单一职责原则是为了实现代码高内聚、低耦合，提高代码的复用性、可读性、可维护性。

2.开闭原则 O

对扩展开放、对修改关闭。
添加一个新的功能，应该是通过在已有代码基础上扩展代码（新增模块、类、方法、属性等），
而非修改已有代码（修改模块、类、方法、属性等）的方式来完成。

3.里氏替换原则 L 

里式替换原则是用来指导，继承关系中子类该如何设计的一个原则。子类完美的继承父类的设计初衷。
父类定义了函数的“约定”（或者叫协议），那子类可以改变函数的内部实现逻辑，但不能改变函数原有的“约定”。
这里的约定包括：函数声明要实现的功能；对输入、输出、异常的约定；甚至包括注释中所罗列的任何特殊说明。

4.接口隔离原则 I

如果把“接口”理解为一组接口集合，可以是某个微服务的接口，也可以是某个类库的接口
等。如果部分接口只被部分调用者使用，我们就需要将这部分接口隔离出来，单独给这部分
调用者使用，而不强迫其他调用者也依赖这部分不会被用到的接口。

如果把“接口”理解为单个 API 接口或函数，部分调用者只需要函数中的部分功能，那我
们就需要把函数拆分成粒度更细的多个函数，让调用者只依赖它需要的那个细粒度函数。

如果把“接口”理解为 OOP 中的接口，也可以理解为面向对象编程语言中的接口语法。那
接口的设计要尽量单一，不要让接口的实现类和调用者，依赖不需要的接口函数

5.依赖倒置原则 D

依赖反转原则也叫作依赖倒置原则。这条原则跟控制反转有点类似，主要用来指导框架层面
的设计。高层模块不依赖低层模块，它们共同依赖同一个抽象。抽象不要依赖具体实现细
节，具体实现细节依赖抽象

6.迪米特法则 

不该有直接依赖关系的类之间，不要有依赖；有依赖关系的类之间，尽量只依赖必要的接
口。迪米特法则是希望减少类之间的耦合，让类越独立越好。每个类都应该少了解系统的其
他部分。一旦发生变化，需要了解这一变化的类就会比较少。

7.KISS原则

Keep It Simple and Stupid.
KISS 原则是保持代码可读和可维护的重要手段。KISS 原则中的“简单”并不是以代码行数
来考量的。代码行数越少并不代表代码越简单，我们还要考虑逻辑复杂度、实现难度、代码
的可读性等。而且，本身就复杂的问题，用复杂的方法解决，并不违背 KISS 原则。

对于如何写出满足 KISS 原则的代码，我还总结了下面几条指导原则：
不要使用同事可能不懂的技术来实现代码；

不要重复造轮子，要善于使用已经有的工具类库；

不要过度优化。

8.DRY原则
Don’t RepeatYourself。中文直译为：不要重复自己。将它应用在编程中，可以理解为：不要写重复的代码

9.YAGNI原则
You Ain’t Gonna Need It
不要去设计当前用不到的功能；不要去编写当前用不到的代码。实际上，这条原则的核心思想就是：不要做过度设计。


#### 改善代码质量原则
命名与注释（Naming andComments）、代码风格（Code Style）和编程技巧（Coding Tips）

命名
1. 命名多长最合适？
总之，命名的一个原则就是以能准确达意为目标。
1)对于一些默认的、大家都比较熟知的词，我比较推荐用缩写。这样一方面能让命名短一些，另一方面又不影响阅读理解，比如，sec 表示 second、str 表示 string、num 表示 number、doc 表示 document
2)对于作用域比较小的变量，我们可以使用相对短的命名，比如一些函数内的临时变量。相反，对于类名这种作用域比较大的，我更推荐用长的命名方式

2. 利用上下文简化命名
1)如下面的代码，user可以省略
public class User {
    private String userName;
    private String userPassword;
    private String userAvatarUrl;
//...
}

3. 命名要可读、可搜索
不要用一些特别生僻、难发音的英文单词来命名
我们在命名的时候，最好能符合整个项目的命名习惯。大家都用“selectXXX”表示查询，你就不要用“queryXXX”；大家都用“insertXXX”表示插入一条数据，你就要不用“addXXX”

4. 如何命名接口和抽象类
一种是加前缀“I”，表示一个 Interface。
比如 IUserService，对应的实现类命名为 UserService。另一种是不加前缀，比如
UserService，对应的实现类加后缀“Impl”，比如 UserServiceImpl

一种是加前缀“I”，表示一个 Interface。
比如 IUserService，对应的实现类命名为 UserService。另一种是不加前缀，比如
UserService，对应的实现类加后缀“Impl”，比如 UserServiceImpl

关于注释
1) 注释的目的就是让代码更容易看懂。只要符合这个要求的内容，你就可以将它写到注释里。总结一下，注释的内容主要包含这样三个方面：做什么、为什么、怎么做。对于一些复杂的类和接口，我们可能还需要写明“如何用”

2) 注释本身有一定的维护成本，所以并非越多越好。类和函数一定要写注释，而且要写得尽可能全面、详细，而函数内部的注释要相对少一些，一般都是靠好的命名、提炼函数、解释性变量、总结性注释来提高代码可读性。

代码风格
1) 函数、类多大才合适？
函数的代码行数不要超过一屏幕的大小，比如 50 行。类的大小限制比较难确定。

2) 一行代码多长最合适？
最好不要超过 IDE 显示的宽度。当然，限制也不能太小，太小会导致很多稍微长点的语句
被折成两行，也会影响到代码的整洁，不利于阅读。

3) 善用空行分割单元块
对于比较长的函数，为了让逻辑更加清晰，可以使用空行来分割各个代码块。在类内部，成
员变量与函数之间、静态成员变量与普通成员变量之间、函数之间，甚至成员变量之间，都
可以通过添加空行的方式，让不同模块的代码之间的界限更加明确。

4) 四格缩进还是两格缩进？
我个人比较推荐使用两格缩进，这样可以节省空间，特别是在代码嵌套层次比较深的情况
下。除此之外，值得强调的是，不管是用两格缩进还是四格缩进，一定不要用 tab 键缩
进。

5) 大括号是否要另起一行？
我个人还是比较推荐将大括号放到跟上一条语句同一行的风格，这样可以节省代码行数。但
是，将大括号另起一行，也有它的优势，那就是，左右括号可以垂直对齐，哪些代码属于哪
一个代码块，更加一目了然。

6) 类中成员的排列顺序
在 Google Java 编程规范中，依赖类按照字母序从小到大排列。类中先写成员变量后写函
数。成员变量之间或函数之间，先写静态成员变量或函数，后写普通变量或函数，并且按照
作用域大小依次排列

#### 结构型模式
1. 桥接模式

2. 适配器模式

3. 装饰器模式

4. 代理模式

5. 组合模式

#### 创建型模式
1. 建造者模式

2. 单例模式

3. 静态工厂模式
```
1.有一个产品的接口，接口里面是通过的方法
2.创建两个产品，实现产品的接口和接口的方法
3.创建一个工厂类，该类有一个创建产品的方法，根据输入不同的参数，创建不同的产品，返回值是产品的接口
4.创建测试类进行测试

优点：

缺点：

适用场景：
```
4. 工厂方法模式
```
1. 有一个产品的接口，接口里面是通用的方法
2. 创建两个产品，实现产品的接口和接口的方法
3. 创建一个工厂的接口，里面有一个生产产品的方法，返回的是产品的接口
4. 创建工厂类，针对不同的产品，写不同的工厂类，实现工厂接口和方法
5. 创建测试类

优点：

缺点：

适用场景：
```
######5. 抽象工厂模式
```
1. 有多个产品的接口，接口里面是通用的方法
2. 创建多个产品，不同类型的产品实现不同的接口和接口方法
3. 创建一个工厂接口，里面有生产多个不同类型产品的接口
4. 针对不同的产品，写不同的工厂类，实现工厂接口，实现生产多个产品接口的方法，方法的内容是生产各自的产品
5. 创建测试类

优点：

缺点：

适用场景：
```
#### 行为型模式
1. 模板方法模式

2. 策略模式

3. 观察者模式

4. 责任链模式

5. 命令模式

6. 访问者模式